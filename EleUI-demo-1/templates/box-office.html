{% extends 'base.html' %}

{% block header %}
    <h1>{% block title %}Box-office{% endblock %}</h1>
    {% block css_style %}
    <script src="https://unpkg.com/axios/dist/axios.js"></script>
    <script src="https://cdn.bootcss.com/echarts/4.2.0-rc.2/echarts.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/box-office.css') }}">
    {% endblock %}
{% endblock %}


<!-- content Start -->
{% block content %}
<el-main>
  <div class="box-main">
          
    <el-form class="box-form" ref="form" :model="form" >
      <el-form-item>
        <el-collapse class="box-collapse" v-model="form.activeNames"  @change="handleChange">
          <el-collapse-item  title="票房占比" name="1">
            

            <div class="block">
              <span class="demonstration">Month</span>
              <el-date-picker
                    v-model="startm"
                    align="right"
                    type="month"
                    placeholder="开始时间"
                    value-format = "yyyy-MM"
                    :picker-options="startDatePicker">
              </el-date-picker>
              <el-date-picker
                    v-model="endm"
                    align="right"
                    type="month"
                    placeholder="结束时间"
                    value-format = "yyyy-MM"
                    :picker-options="endDatePicker">
              </el-date-picker>
              <p>Start Value: {[ startm ]}</p>
              <p>End Value: {[ endm ]}</p>
              <el-button type="primary" v-on:click="submit()">提交</el-button>
              <p>Resource: {[ resource ]}</p>
            </div>

            <el-select v-model="value" placeholder="请选择图表类型">
              <el-option 
                v-for="item in options"
                :key="item.value"
                :label="item.label"
                :value="item.value">
              </el-option>
            </el-select>

            <!-- <div id="plot1" style="width: 600px;height: 400px;"></div>
            <script type="text/javascript">
              app.myChart = echarts.init(document.getElementById('plot1'));
            </script> -->





            
            
          </el-collapse-item>
          <el-collapse-item title="票房趋势" name="2">
            
              
          </el-collapse-item>
        </el-collapse>
      </el-form-item>
    </el-form>
  </div>
</el-main>
{% endblock %}
<!-- content End -->

<!-- script start -->
{% block mainvue %} 
<script>
  var Main = {
    elimiters: ['{[', ']}'],
    data(){
      return{
        menuActive:'2',
        form:{
          activeNames: ['1'],          
        },
        value:'',
        options: [{
            value: '选项1',
            label: '饼状图'
          }, {
            value: '选项2',
            label: '柱状图'
          }, {
            value: '选项3',
            label: 'Echarts'
          }, {
            value: '选项4',
            label: 'Echarts'
          }, {
            value: '选项5',
            label: 'Echarts'
          }],
        startm: '',
        endm: '',
        resource: 'Hello',
        startDatePicker: '',
        endDatePicker: '',
        mychart: ''
      };
    },
    // created(){
    //   return{
    //     this.startDatePicker = this.startDatePicker2()
    //     this.endDatePicker = this.endDatePicker2()
    //   }
    // },
    methods: {
      handleChange(val) {
        console.log(val);
      }
      // submit: function(){
      //   axios.post('/resource', {
      //     startm: this.startm,
      //     endm: this.endm
      //   })
      //     .then(response => {
      //       this.resource = response.data
      //       console.log('resource:' + this.resource)

      //       data = []
      //       for (prop in this.resource) {
      //         data.push({value: this.resource[prop], name: prop})
      //       }
      //       console.log(data)
      //       var option = {
      //         series: [{
      //           name: '票房',
      //           type: 'pie',
      //           radius: '55%',
      //           data: data
      //         }]
      //       }
      //       this.myChart.setOption(option);
      //       //this.$set('resource', response.data)
      //     }, response => {
      //       console.log(response)
      //     })
      // },
      // startDatePicker2: function(){
      //   let self = this
      //   return {
      //     disabledDate(time){
      //       let startDate = new Date(2015, 0)
      //       if(self.endm){
      //         return time.getTime() > new Date(self.endm).getTime() || time.getTime() < startDate
      //       }
      //       return time.getTime() < startDate//开始时间不选时，结束时间最大值小于等于当天
      //     }
      //   }
      // },
      // endDatePicker2: function(){
      //   let self = this
      //   return {
      //     disabledDate(time){
      //       let endDate = new Date(2018, 11)
      //       if(self.startm){
      //         return new Date(self.startm).getTime() > time.getTime() || time.getTime() > endDate
      //       }else{
      //         return time.getTime() > Date.now()//开始时间不选时，结束时间最大值小于等于当天
      //       }
      //     }
      //   }
      // }
    }
  };
  var Ctor = Vue.extend(Main)
  new Ctor().$mount('#app')
</script>
{% endblock %}
<!-- script end -->

  
